根据之前的分析和层次 C 中的节点状态，我们可以进一步总结解空间树的搜索过程和最优解的选择。在层次 C 中，我们已经找到了两个满足装载约束的可行解（节点 E 和节点 F），并且这两个解具有相同的优先级（即两艘轮船的载重总和满足约束并达到最大值）。

![](assets/Pasted%20image%2020241114211453.png)

### 详细解空间树总结

让我们再仔细梳理整个解空间树的搜索过程，以确保对每个节点的装载状态和剪枝过程有清晰的理解。

---

#### 根节点 (A)

- **选择第一个集装箱 (重量 16)**：
  - 放入轮船 1：进入节点 B，载重为 `16 / 0`，解为 `1 0`。
  - 放入轮船 2：进入节点 C，载重为 `0 / 15`，解为 `0 1`。

---

#### 节点 B（第一层）

- **选择第二个集装箱 (重量 15)**：
  - 放入轮船 1：进入节点 D，载重为 `31 / 0`，解为 `1 1 0`。此路径因轮船 1 载重超过 `C1 = 30`，被剪枝。
  - 放入轮船 2：进入节点 E，载重为 `16 / 30`，解为 `1 0 1`，满足载重限制。

---

#### 节点 C（第一层）

- **选择第二个集装箱 (重量 15)**：
  - 放入轮船 1：进入节点 F，载重为 `0 / 30`，解为 `0 1 1`，满足载重限制。
  - 放入轮船 2：进入节点 G，载重为 `0 / 15`，解为 `0 0 0`，此路径不含任何装载，且优先级最低，因此不作为有效解。

---

### 总结最优解

在搜索过程中，我们找到了两个满足条件的可行解（节点 E 和节点 F），每个解都有不同的装载方案：

1. **节点 E**：
   - 装载方案：`1 0 1`
   - 轮船 1 载重：16
   - 轮船 2 载重：30
   - 优先级：30（满足约束）

2. **节点 F**：
   - 装载方案：`0 1 1`
   - 轮船 1 载重：0
   - 轮船 2 载重：30
   - 优先级：30（满足约束）

### 选择最优方案

在这种情况下，节点 E 和节点 F 都达到相同的最优优先级（30），并且都满足两艘轮船的载重约束。因此，两个方案都可以作为最终的最优装载方案。可以选择其中任意一个作为解。

---

### 最终输出

- **最优装载方案**：
  - 装载方案 1：`1 0 1`（轮船 1 载重 16，轮船 2 载重 30）
  - 装载方案 2：`0 1 1`（轮船 1 载重 0，轮船 2 载重 30）
- **总优先级**：30（满足载重限制）

这就是对整个装载问题的分支限界解法的完整分析。通过构建解空间树、逐层扩展节点，并在每个节点进行剪枝操作，我们得到了满足载重约束的最优装载方案。


---

### 装载问题示例

我们有三件集装箱的重量 `weights = [16, 15, 15]`，两艘轮船的载重量分别为 `C1 = 30` 和 `C2 = 30`。目标是找出一种装载方案，使得所有集装箱都被装入轮船 1 或轮船 2 中，并且两艘船的载重都不超过各自的限制。

### 解空间树分析

使用**有限队列式分支限界法**来构建解空间树，并记录每一个节点的装载状态。

- 每个节点有两种选择：
  - 将当前集装箱装入轮船 1。
  - 将当前集装箱装入轮船 2。
- 每个节点记录以下信息：
  - **载重**：当前轮船的总载重。
  - **解**：表示装载情况（如 `1 0 1` 表示集装箱 1 和 3 被装入）。
  - **优先级**：载重的优先级。
  - **下一层**：指示下一步要处理的集装箱。

### 分支限界法步骤

根据图示的结构图，逐步描述解空间树的构建和扩展过程。每一层代表每一个集装箱的选择。

---

#### 层次 A（根节点）

| 节点 | 载重     | 解   | 优先级 | 下一层 |
|------|----------|------|--------|--------|
| A    | 16 / 0   | 1 0  | 16     | 2      |
|      | 0 / 15   | 0 1  | 15     | 2      |

- **选择第一个集装箱**：
  - 将第一个集装箱（16）装入轮船 1，则载重为 `16 / 0`，装载方案为 `1 0`。
  - 将第一个集装箱（15）装入轮船 2，则载重为 `0 / 15`，装载方案为 `0 1`。

---

在层次 B 中，我们对每个节点继续进行扩展和分析，以构建解空间树。

---

### 层次 B

在层次 B 中，考虑第二个集装箱的装载，当前节点状态如下：

| 节点 | 载重       | 解    | 优先级 | 下一层 |
|------|------------|-------|--------|--------|
| B    | 31 / 15    | 1 1   | 31     | 3      |
|      | 16 / 30    | 1 0 1 | 30     | 3      |
| C    | 0 / 30     | 0 1   | 30     | 3      |
|      | 0 / 15     | 0 0   | 15     | 3      |

- **节点 B**：总载重为 `31 / 15`，表示第一个和第二个集装箱分别装入轮船 1 和轮船 2，解为 `1 1`。
  - **将第 3 个集装箱装入轮船 1**：新载重为 `31 + 15 = 46`，超过了轮船 1 的载重上限 `C1 = 30`，因此剪枝。
  - **将第 3 个集装箱装入轮船 2**：新载重为 `15 + 15 = 30`，不超过轮船 2 的载重上限，更新为 `(31 / 30, 1 1 1)`，优先级为 30。

- **节点 C**：总载重为 `0 / 30`，表示第二个集装箱装入轮船 2，解为 `0 1`。
  - **将第 3 个集装箱装入轮船 1**：新载重为 `0 + 15 = 15`，更新为 `(15 / 30, 0 1 1)`，优先级为 15。
  - **将第 3 个集装箱装入轮船 2**：新载重为 `30 + 15 = 45`，超过了轮船 2 的载重上限，剪枝。

---

在层次 C 中，我们对第三个集装箱的装载进行处理。以下是所有可能的节点扩展以及对应的解空间树状态：

---

### 层次 C

在层次 C 中，处理第三个集装箱的装载情况，当前节点状态如下：

| 节点 | 轮船 1 载重 / 轮船 2 载重 | 解     | 优先级 | 下一层 |
|------|---------------------------|--------|--------|--------|
| D    | 31 / 15                   | 1 1 0  | 31     | -      |
| E    | 16 / 30                   | 1 0 1  | 30     | -      |
| F    | 0 / 30                    | 0 1 1  | 30     | -      |
| G    | 0 / 15                    | 0 0 0  | 15     | -      |

- **节点 D**：总载重为 `31 / 15`，解为 `1 1 0`，表示第一个和第二个集装箱分别装入轮船 1 和轮船 2，第三个集装箱未装载。
  - **此节点的优先级为 31**，即当前轮船 1 的载重总和。由于轮船 1 的载重超过上限 `C1 = 30`，此分支会被剪枝。

- **节点 E**：总载重为 `16 / 30`，解为 `1 0 1`，表示第一个集装箱装入轮船 1，第二个集装箱未装载，第三个集装箱装入轮船 2。
  - **此节点的优先级为 30**，满足轮船 1 和轮船 2 的载重要求，因此这个路径是可行解。

- **节点 F**：总载重为 `0 / 30`，解为 `0 1 1`，表示第二和第三个集装箱装入轮船 2，轮船 1 未装载。
  - **此节点的优先级为 30**，满足轮船 1 和轮船 2 的载重要求，因此这个路径也是一个可行解。

- **节点 G**：总载重为 `0 / 15`，解为 `0 0 0`，表示所有集装箱都未装载。
  - **此节点的优先级为 15**，但因为没有装载任何集装箱，因此不是我们要的解。

---

### 结果总结

通过分析所有可能的解空间树节点，我们可以得到以下可行解：

1. **最优解节点 E**：解 `1 0 1`，轮船 1 载重 16，轮船 2 载重 30，优先级为 30。
2. **次优解节点 F**：解 `0 1 1`，轮船 1 载重 0，轮船 2 载重 30，优先级为 30。

### 最优解选择

在满足条件的解中，节点 E 和节点 F 都满足装载约束且达到了最优载重。可以选择其中任意一个作为最优解。

---

### 最终输出

- **最优装载方案**：
  - 装载方案 1：`1 0 1`（轮船 1 载重 16，轮船 2 载重 30）
  - 装载方案 2：`0 1 1`（轮船 1 载重 0，轮船 2 载重 30）
- **总优先级**：30（满足载重限制）

这就是对整个装载问题的分支限界解法的完整分析。通过构建解空间树、逐层扩展节点，并在每个节点进行剪枝操作，我们得到了满足载重约束的最优装载方案。
