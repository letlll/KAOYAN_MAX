在[[分支限界法（LC-BB）]]中的 **upper bound** 和 **cost** 的计算方式。你所表达的这两个状态是对 0-1 背包问题中 **上界**（upper bound）和 **实际成本**（cost）的不同表示。让我们详细分析这两个状态。

### 1. **Upper Bound（上界）**：
   - **公式**：$u = \sum_{i=1}^{n} p_i w_i$  
     其中：
     - $p_i$ 是物品 $i$ 的利润。
     - $w_i$ 是物品 $i$ 的重量。
     - 上界, 计算当前已选择的物品的实际利润。
     - 计算时，不能选择部分物品。

   - **应用**：
     - 通过 **upper bound** 我们可以估算当前节点的最大可能利润，并且如果发现某个节点的上界已经小于当前最优解的上界（或成本），那么这个节点就可以剪枝掉，避免浪费时间继续探索无效分支。

### 2. **Cost（实际成本）**：
   - **公式**：$c = \sum_{i=1}^{n} p_i w_i$（可以拆分，考虑部分物品）
   -  $c$ 表示的是当前状态下背包可能的最大利润，但是它是一个估算值。
   -  计算时，可以选择部分物品（即贪心策略），计算所有物品的最大可能利润，但不能超过背包的剩余容量。

### **分支限界法中的使用**：
- **Upper Bound**（上界）是我们当前路径的实际收益，表示当前已经选择的物品的利润。在回溯或者搜索过程中，**Upper Bound**是用来判断当前路径的好坏的依据。

- **Cost**（实际成本）用于估算当前节点可能的最大收益，帮助我们在求解过程中进行剪枝。通过上界来判断某些分支是否可以提前终止（剪枝），如果某个节点的上界小于当前已知最优解的 **Upper Bound**，则可以忽略这个节点。

### 计算过程举例：
假设背包容量为 15，物品的利润和重量如下：
- 物品 1：利润 = 10，重量 = 2
- 物品 2：利润 = 10，重量 = 4
- 物品 3：利润 = 12，重量 = 6
- 物品 4：利润 = 18，重量 = 9

#### 第一层状态：
- **Cost**：如果选择物品 1、物品 2 和物品 3，总利润为：
$$
  \text{Cost} = 10 + 10 + 12 +6= 38（-38）
$$
  物品 4 由于超出容量（15-2-4-6 = 3，物品 4 的重量为 9）放入物品 4 的部分利润至背包容量 15。

- **Upper Bound**：对于物品 1、物品 2 和物品 3，总利润为：
$$
  \text{Upper Bound} = 10 + 10 + 12 = 32（-32）
$$
 在剩余容量 3 的情况下，物品 4 无法放入，所以上界即为 -32。

#### 第二层状态：
- 假设选择物品 1 和物品 2。
- **Cost**：选择物品 1 和物品 2 的总利润为：
$$
  \text{Cost} = 10 + 10 + 12 +6= 38（-38）
$$
  
- **Upper Bound**：继续估算可以放入的物品，剩余容量为 9。选择物品 3 和物品 4：
$$
  \text{Upper Bound} = 10 + 10 + 12 = 32（-32）
$$
  物品 4 由于超出容量（15-2-4-6 = 3，物品 4 的重量为 9），物品 4 无法放入。

#### 最终选择：
- 经过各层的分支和剪枝，最终选择物品 1、物品 2 和物品 4，并且总利润为 38，总重量为 15，正好填满背包。

### **总结**：
- **Cost** 计算的是当前路径假设可以选择部分物品的利润。
- **Upper Bound** 是计算当前节点实际利润，即不包括拆分物品的部分利润。
- 在 **分支限界法** 中，通过不断更新 **upper bound** 和 **cost** 来引导搜索方向，并剪枝不可能带来最优解的分支。

---

在 **0-1 背包问题** 中，**分支限界法**（LC-BB）通过创建子树来逐步探索不同的物品选择组合。在每个节点处，我们计算 **上界**（upper bound）和 **实际成本**（cost），然后决定是否继续探索该节点或进行剪枝。以下是创建子树的过程以及如何计算 **upper bound** 和 **cost** 的示例。

### 子树建立过程

#### 背包问题设置：
- 背包最大容量为 15
- 物品有四个，分别为：
  - 物品 1：利润 10，重量 2
  - 物品 2：利润 10，重量 4
  - 物品 3：利润 12，重量 6
  - 物品 4：利润 18，重量 9

#### 子树的构建

每个节点表示一个背包的状态，记录了已选择的物品和当前背包的容量剩余。我们通过 **0-1 决策树**来逐步探索每个物品是否应该被放入背包。

### 初始状态（根节点）

在根节点（空背包）下，我们没有选择任何物品，背包的容量为 15。

| 物品编号 | 利润  | 重量  | 当前背包容量 | 当前成本 (Cost) | 上界 (Upper Bound)  | 是否选择 |
| ---- | --- | --- | ------ | ----------- | ----------------- | ---- |
| 物品 1 | 10  | 2   | 15     | -38         | 10 + 10 + 12 =-32 | ?    |

#### 下一步：
1. **选择物品 1**：选择物品 1 后，背包剩余容量为 13。
2. **不选择物品 1**：继续向下探索。

### 第一层子树（选择或不选择物品 1）

#### 子树 1（选择物品 1）
- **当前背包容量**：15 - 2 = 13
- **当前成本**：10
- **上界**：我们接着计算如果选择了物品 1，剩余背包容量 13，继续选择物品。

| 物品编号 | 利润  | 重量  | 当前背包容量 | 当前成本 (Cost) | 上界 (Upper Bound)  | 是否选择 |
| ---- | --- | --- | ------ | ----------- | ----------------- | ---- |
| 物品 1 | 10  | 2   | 13     | -38         | 10 + 10 + 12 =-32 | 选中   |
| 物品 2 | 10  | 4   | 13     | -38         | 10 + 10 + 12 =-32 | ?    |

- **计算成本**：假设接下来可以选择物品 2 和物品 3 的全部利润和物品 4 部分利润。
$$
  \text{Cost} = 10 + 10 + 12 +6= 38（-38）
$$
- **计算上界**：假设接下来可以选择物品 2 和物品 3 的部分重量。物品 4 因容量不足不能选择。
$$
  \text{Upper Bound} = 10 + 10 + 12 = 32（-32）
$$

#### 子树 2（不选择物品 1）
- **当前背包容量**：15
- **当前成本**：0
- **上界**：我们接着计算如果不选择物品 1，剩余容量仍为 15。

| 物品编号 | 利润  | 重量  | 当前背包容量 | 当前成本 (Cost) | 上界 (Upper Bound) | 是否选择 |
| ---- | --- | --- | ------ | ----------- | ---------------- | ---- |
| 物品 1 | 10  | 2   | 15     | -32         | 10 + 12 =-22     | 不选   |
| 物品 2 | 10  | 4   | 15     | -32         | 10 + 12 =-22     | ?    |

- **计算成本**：假设接下来可以选择物品 2 和物品 3 的全部利润和物品 4 部分利润。
$$
  \text{Cost} = 10 + 12 +12= 32（-32）
$$
- **计算上界**：假设接下来可以选择物品 2 和物品 3 的部分重量。物品 4 因容量不足不能选择。
$$
  \text{Upper Bound} = 10 + 12 = 22（-22）
$$

### 进一步的子树探索

随着树的不断展开，我们会进入更深层次的子树。在每一层，我们将根据是否选择某个物品来更新当前的背包容量、已选择物品的利润（cost）以及上界（upper bound）。在每个节点的选择上，我们都通过计算 **upper bound** 来判断该分支是否有潜力产生更优的解，如果上界小于当前已知的最优解，则进行 **剪枝**。

### 关键步骤：

1. **Upper Bound 计算**：当我们到达某个节点时，我们计算上界，通过贪心策略将剩余空间填满。如果上界已经小于当前最优解的成本，就可以进行剪枝，避免不必要的搜索。
2. **Cost 计算**：我们记录当前已选择物品的总利润。**Cost** 是用来评价当前路径的好坏的关键指标。
3. **剪枝**：如果当前路径的上界小于或等于当前最优解（即已经找到的最优解），我们就可以剪枝，避免继续深入。

### 最优解的选择

最终，当我们选择物品 1、物品 2 和物品 4 时，总利润为 **38**，背包正好装满，总重量为 **15**，这是一个最优解。
