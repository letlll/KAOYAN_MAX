好的，以下是使用 MathJax 书写的贪心算法最优性证明的详细过程：

### 贪心算法的最优性证明（反证法）

我们用**反证法**来证明：通过贪心算法得到的解 \( X \) 是最优解。贪心算法的选择策略是：**每次选择重量最轻的集装箱**，以尽可能装入更多的集装箱。我们的目标是证明这个策略能得到装入最多集装箱的最优解。

#### 证明过程

1. **假设贪心解 \( X \) 不是最优的**：假设存在一个比贪心解 \( X = (x_1, x_2, \ldots, x_n) \) 更优的解 \( Y = (y_1, y_2, \ldots, y_n) \)，使得：
   - **装入的集装箱数量更多**，即：
     \[
     \sum_{i=1}^n y_i > \sum_{i=1}^n x_i
     \]
   - **满足重量限制**，即：
     \[
     \sum_{i=1}^n w_i y_i \leq C
     \]
   其中，\( w_i \) 表示第 \( i \) 个集装箱的重量，\( C \) 是总载重量的上限。

2. **设贪心解 \( X \) 和假设的更优解 \( Y \) 在第 \( k \) 个位置出现分歧**：
   - 在前 \( k-1 \) 个位置上，贪心解 \( X \) 和假设的更优解 \( Y \) 的选择是相同的，即前 \( k-1 \) 个集装箱的选择没有分歧。
   - 在位置 \( k \)，贪心解 \( X \) 选择了一个重量较轻的集装箱，而假设的更优解 \( Y \) 选择了一个重量较重的集装箱。即：
     \[
     W_k^{(X)} < w_k^{(Y)}
     \]

3. **构造新的解 \( Y' \)**：
   - 基于假设的更优解 \( Y \)，我们可以构造一个新的解 \( Y' \)。
   - 将解 \( Y \) 中位置 \( k \) 处的较重集装箱替换为贪心解 \( X \) 中位置 \( k \) 处的较轻集装箱。
   - 替换后，解 \( Y' \) 的总重量不超过 \( C \)（因为我们用较轻的集装箱替换了较重的集装箱）。因此：
     \[
     \sum_{i=1}^n w_i y_i' \leq C
     \]
   - 这样一来，解 \( Y' \) 留下了更多的剩余载重量，意味着在后续选择中，解 \( Y' \) 可以继续装入更多的集装箱。

4. **得到矛盾**：
   - 按照上述替换步骤，我们可以逐步将解 \( Y \) 中的较重集装箱替换为贪心解 \( X \) 中的较轻集装箱，从而构造出一个解 \( Y' \)。
   - 最终，这种替换过程会使得解 \( Y' \) 与贪心解 \( X \) 相同，或者得到一个与 \( Y \) 装载数量相同但剩余更多载重量的解。
   - 如果 \( Y' \) 还留有剩余的载重量，则可以继续装入更多的集装箱，从而比假设的更优解 \( Y \) 还要多装一个集装箱。
   - 这与假设的 \( Y \) 是最优解相矛盾。

5. **结论**：
   - 因此，假设的更优解 \( Y \) 不存在。
   - 贪心解 \( X \) 就是最优解。

### 总结

通过反证法，我们证明了贪心算法的选择策略（每次选择重量最轻的集装箱）能够确保得到最优解，即装入最多数量的集装箱，同时满足重量不超过载重限制 \( C \) 的要求。