# 四. 简答题

1. 将图 1 中给出的不完整的进程基本状态及其转换条件补充完整。

 ![](assets/Pasted%20image%2020241211203740.png)

答: 1. 就绪  2. 运行  3. 阻塞  4. 进程调度  5. 时间片到

2. 某单处理机系统采用抢占式 SJF（短作业优先），进程的到达时间和运行时间如表 1 所示，

请将表 1 补充完整。（忽略进程切换时间）

                         表1 抢占式短作业优先调度

|      |      |        |        |      |
| ---- | ---- | ------ | ------ | ---- |
| 进程名称 | 到达时间 | 要求运行时间 | 开始运行时间 | 完成时间 |
| P 1   | 0:00 | 4 小时    |        |      |
| P 2   | 1:00 | 1 小时    |        |      |
| P 3   | 3:00 | 2 小时    |        |      |
| P 4   | 6:00 | 5 小时    |        |      |
| P 5   | 8:00 | 2 小时    |        |      |

答：

|   |   |   |   |   |
|---|---|---|---|---|
|进程名称|到达时间|要求运行时间|开始运行时间|完成时间|
|P 1|0:00|4 小时|0:00|7:00|
|P 2|1:00|1 小时|1:00|2:00|
|P 3|3:00|2 小时|3:00|5:00|
|P 4|6:00|5 小时|7:00|14:00|
|P 5|8:00|2 小时|8:00|10:00|



3. 假设在一个文件系统中，物理块的大小为 512 B, FCB 占 48 B。把 FCB 分成两个部分：符号目录项占 8 B（其中文件名占 6 B，索引节点编号占 2 B)；基本目录项占 40 B。现有一个目录文件包含 256 个目录项，请问:

（1）       在进行目录项分解后，需要多少个物理块来存放目录文件？

（2）       在进行目录项分解后，查找一个文件的平均访盘次数为多少？答：（1）（8*256）/512=4（块）

（2）（1+4）/2≈3（次），然后启动并访问磁盘 1 次，读取文件。故查找一个文件的平均访盘次数是 3+1=4（次）

4. 某系统采用分页存储管理方式，逻辑空间为 32 页，每页 2 KB，物理空间为 1 MB。请写出逻辑地址的格式；若不考虑访问权限等，则进程的页表项有多少? 每项至少含多少位?

答：该系统拥有逻辑空间 32 页，故在逻辑地址中页号用 5 位二进制数来描述，每页为 2 KB，因此页内地址必须用 11 位二进制数描述，由此可得如下逻辑地址格式:

15                                  11   10                                   0

|   |   |
|---|---|
|页号|页内位移|

每个进程最多有 32 个页面，因此进程的页表项最多为 32 项; 若不考虑访问权限等，则页表中只须给出每页所对应的物理块号，1 MB 的物理空间可以分成 1 MB/2 KB=29 个物理块，故每个页表项至少有 9 位。

5. 现有五个进程 A，B，C，D，E，共享 R 1，R 2，R 3 三类资源，其中 R 1 类资源数量为 17；R 2 类资源数量为 5；R 3 类资源数量为 20。T 0 时刻系统的状态如表 2 所示。系统采用银行家算法实施死锁的避免策略。

## 表 2

|   |   |   |   |   |   |   |
|---|---|---|---|---|---|---|
|进程||已分配资源|||最大需求资源||
|R 1|R 2|R 3|R 1|R 2|R 3|
|A|2|1|2|5|5|9|
|B|4|0|2|5|3|6|
|C|4|0|5|4|0|11|
|D|2|0|4|4|2|5|
|E|3|1|4|4|2|4|

T 0 时刻系统是否安全？若安全请写出安全序列。

答：T 0 时刻是安全的，存在安全序列｛E，D，C，B，A｝（计算过程略）

6. 设备管理中的数据传送控制方式有哪几种？分别简述如何实现的。

答：答: 程序直接控制：由用户进程来直接控制内存或 CPU 和外设间的信息传送。

中断方式：进程通过 CPU 发出指令启动外设，该进程阻塞。当输入完成时，I/O 控制器通过中断请求线向 CPU 发出中断信号，CPU 进行中断处理。

DMA 方式：在外设和内存之间开辟直接的数据交换通路。

通道控制方式：CPU 发出启动指令，指出通道相应的操作和 I/O 设备，该指令就可启动通道并使该通道从内存中调出相应的通道指令执行。

7. 处理机调度分为哪三级？各自的主要任务是什么？答：长程（作业）调度：从一批后备作业中选择一个或几个作业，给它们分配资源，建立进程，挂入就绪队列。执行完后，回收资源。

短程（进程）调度：从就绪进程队列中根据某个策略选取一个进程，使之占用 CPU。

中程调度：按照给定的原则和策略，将外存交换区中的进程调入内存，把内存中的非执行进程交换到外存交换区中。

8. 试说明资源的静态分配策略能防止死锁的原因。

答：资源静态分配策略要求每个进程在开始执行前申请所需的全部资源，仅在系统为之分配了所需的全部资源后，该进程才开始执行。这样，进程在执行过程中不再申请资源，从而破

坏了死锁的四个必要条件之一“占有并等待条件”，从而防止死锁的发生。

9. 若在一分页存储管理系统中, 某作业的页表如表 3 所示. 已知页面大小为 1024 字节, 试将逻辑地址 1011,2148,4000,5012 转化为相应的物理地址。

## 表 3

|   |   |
|---|---|
|页号|物理块号|
|0|2|
|1|3|
|2|1|
|3|6|

答：对于逻辑地址 1011，P=INT (1011/1024)=0，D=1011 mod 1024=1011，查页表第 0 页在第 2 块, 所以物理地址为 3059.

对于逻辑地址 2148，P=INT (2148/1024)=2，D=2148 mod 1024=100，查页表第 2 页在第 1 块, 所以物理地址为 1124. 

对于逻辑地址 4000，P=INT (4000/1024)=3，D=4000 mod 1024=928，查页表第 3 页在第 6 块, 所以物理地址为 7072.  对于逻辑地址 5012，P=INT (5012/1024)=4，D=5012 mod 1024=916，因页号超过页表长度, 该逻辑地址非法. 

10. 若干个等待访问磁盘者依次要访问的柱面为 20，44，40，4，80，12，76，假设每移动一个柱面需要 3 毫秒时间，移动臂当前位于 40 号柱面，请按下列算法分别计算为完成上述各次访问总共花费的寻找时间。   (1) 先来先服务算法   (2) 最短寻找时间优先算法

答：(1) 40 → 20 → 44 → 40 → 4 → 80 → 12 → 76     共移动 292 柱面

3 毫秒×292=876 毫秒

(2) 40 → 44 → 20 → 12 → 4 → 76 → 80     共移动 120 柱面

3 毫秒×120=360 毫秒


---

你提到的内容涉及操作系统中的设备管理、处理机调度以及资源分配策略的概念。为了帮助你更好地理解这些问题，我将逐个解释并提供清晰的类比。

---

### 6. 设备管理中的数据传送控制方式

设备管理中的数据传输控制方式决定了计算机如何与外部设备（如磁盘、打印机等）进行数据交换。我们有以下几种常见的方式：

#### 1. **程序直接控制**：
- **实现方式**：由用户进程来直接控制内存或 CPU 和外设之间的信息传送。用户进程发出指令，CPU 根据指令与外设进行数据交换。
- **类比**：想象你自己去厨房做饭，控制每个操作，直接用手动方式来做每一件事。没有任何“自动化”，完全由你手动控制。

#### 2. **中断方式**：
- **实现方式**：进程通过 CPU 发出指令启动外设，随后进程会被阻塞（暂停执行）。当外设完成数据传送后，它通过中断请求信号告知 CPU，CPU 再进行处理。
- **类比**：你在超市排队购买商品，正在排队的你在等候支付。店员会在你排队时处理其他事务，当你的商品准备好了（完成了 I/O 操作），店员用“铃铛”通知你，然后继续为你结账。

#### 3. **DMA（直接内存存取）方式**：
- **实现方式**：DMA 方式通过直接在内存和外设之间开辟通道进行数据交换，而不需要 CPU 的干预。外设和内存直接进行数据传输，CPU 不参与实际的数据传输过程，只是管理 DMA 通道。
- **类比**：这就像你有一个自动化的传送带，原本需要店员手动传送的商品，现在可以通过自动化系统直接传送到收银台。CPU 不再直接参与每个商品的转移。

#### 4. **通道控制方式**：
- **实现方式**：在通道控制方式中，CPU 发出启动指令，指示通道去控制外设操作。通道是一个硬件设备，它可以独立执行 I/O 操作并从内存中调出指令执行，减少 CPU 的负担。
- **类比**：想象你是一个管理者，你发出指令给一个工人（通道），这个工人接管了具体的任务（与外设交互），而你则不需要亲自去执行这些繁琐的操作。

---

### 7. 处理机调度的三级分类

处理机调度是操作系统负责分配 CPU 资源的策略，通常根据调度的层次分为三个级别：

#### 1. **长程调度（作业调度）**：
- **任务**：长程调度负责从大量等待执行的作业中选择一些作业，将它们调度到内存中，并为它们分配资源。作业调度完成后，这些作业进入就绪队列，准备进入执行阶段。
- **类比**：就像是一个商场的顾客在排队购物，每个顾客都有一个“顾客编号”（作业）。长程调度就像是商场经理选择哪些顾客可以进店购物（进入内存），而哪些顾客则继续在外面等待。

#### 2. **短程调度（进程调度）**：
- **任务**：短程调度负责从就绪队列中选择一个进程并将其分配到 CPU 上执行。它决定哪个进程将占用 CPU，并在进程完成时释放 CPU。
- **类比**：就像是一个老师决定哪个学生去做作业。每个学生（进程）排队等候，老师会根据某种规则（调度策略）决定谁先做作业。

#### 3. **中程调度（交换调度）**：
- **任务**：中程调度负责管理内存中的进程，它决定哪些进程需要从外存（磁盘）调入内存，哪些进程需要从内存调出外存。这有助于优化内存的使用，并确保系统中有足够的进程执行。
- **类比**：想象你是一个仓库管理员，你需要决定哪些箱子（进程）应从仓库（磁盘）搬到你的工作桌（内存），哪些箱子则可以搬回仓库保存，腾出空间给其他工作。

---

### 8. 资源的静态分配策略能防止死锁的原因

资源的分配策略决定了进程如何获得所需资源。静态分配策略有助于避免死锁的发生。

#### **静态分配策略**：
- **原理**：在静态分配策略中，每个进程在开始执行之前会申请所需的全部资源。系统只会在进程申请的所有资源都能得到满足时，才允许进程开始执行。这意味着进程在执行过程中不会再申请新的资源。
- **防止死锁的原因**：死锁发生的四个必要条件包括“占有并等待”（一个进程持有资源，并等待其他资源）。静态分配策略破坏了这一条件，因为进程在开始时就已获得了所有资源，因此不再会有等待的情况发生。
- **类比**：想象你是一个聚会的主持人，你事先给每位来宾（进程）发放好所有的食物和饮料（资源）。大家不会互相争抢，因为每个人都已拿到自己所需要的一切。没有人会在等待某个资源（食物/饮料）时被卡住。

---

### 总结

- **设备管理中的数据传送方式**：程序直接控制、I/O 中断、DMA、通道控制等。
- **处理机调度的三级分类**：长程调度、短程调度、中程调度。
- **资源的静态分配策略防止死锁**：通过在进程开始时就分配所有资源，避免进程在执行过程中申请资源，从而防止“占有并等待”条件的发生，避免死锁。

---