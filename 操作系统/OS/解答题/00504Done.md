4. 假设目前有 6 个读写磁盘的请求如表 5 所示：表 5

|   |   |   |   |
|---|---|---|---|
|请求次序|柱面号|磁头号|扇区号|
|1|180|7|1|
|2|30|7|2|
|3|12|9|10|
|4|40|2|1|
|5|35|4|8|
|6|90|9|11|

假定当前移动臂位置在 20 号柱面，移动方向是向大于 20 号柱面的方向移动。试问：

（1）       采用电梯调度算法（scan），上述请求的访问次序为何？ 

（2）       如果所有请求的柱面号相同，上述请求的最短寻道时间优先（sstf）次序为何？  答：（1）2,5,4,6,1,3    

（2）3,2,5,4,6,1     

---
---

### 题目分析与解答

在这个问题中，我们有 6 个磁盘访问请求，并且要求使用两种调度算法来确定磁头的访问顺序：**电梯调度算法（Scan）** 和 **最短寻道时间优先（SSTF）**。

#### 1. 电梯调度算法（Scan）

**电梯调度算法（Scan）** 的工作原理是：磁头沿着一个方向移动，直到到达磁盘的一端，然后反转方向并开始向相反的方向移动，访问请求。由于磁头当前的位置在柱面 20 上，并且移动方向是向大于 20 的方向（即向高柱面方向），我们就可以按照电梯算法的规则来确定访问次序。

#### 步骤：
- 当前磁头的位置：柱面 20
- 移动方向：向大于 20 的方向移动。

请求的柱面号分别是：
- 请求 1：180
- 请求 2：30
- 请求 3：12
- 请求 4：40
- 请求 5：35
- 请求 6：90

**按柱面号排序后：**
- 12, 30, 35, 40, 90, 180

根据电梯调度算法，磁头首先沿着当前方向（向大于 20 的方向）移动，直到到达最后的请求柱面，然后反向处理剩余的请求。

- 从柱面 20 开始，磁头会处理 30、35、40、90、180（沿着大柱面方向依次访问这些请求）。
- 完成后，磁头会反向移动，访问剩余的请求 12。

因此，访问顺序是：**2, 5, 4, 6, 1, 3**。

**答案：**
（1）电梯调度算法（Scan）的访问次序是 **2, 5, 4, 6, 1, 3**。

#### 2. 最短寻道时间优先（SSTF）

**最短寻道时间优先（SSTF）** 调度算法的工作原理是：每次选择距离当前磁头位置最近的请求来访问。磁头每次选择离当前位置最近的柱面进行访问，从而尽量减少寻道时间。

#### 步骤：
- 当前磁头的位置：柱面 20
- 请求的柱面号分别是：12, 30, 35, 40, 90, 180

**计算每个请求的距离**（当前磁头位置为柱面 20）：
- 请求 1：180，距离 160
- 请求 2：30，距离 10
- 请求 3：12，距离 8
- 请求 4：40，距离 20
- 请求 5：35，距离 15
- 请求 6：90，距离 70

首先，选择距离柱面 20 最近的请求：
- 距离 20 最近的是请求 3，柱面号为 12。

接着，从柱面 12 开始，计算剩余请求的距离：
- 请求 3：12，已访问
- 请求 2：30，距离 18
- 请求 5：35，距离 23
- 请求 4：40，距离 28
- 请求 6：90，距离 78
- 请求 1：180，距离 168

选择距离 12 最近的是请求 2，柱面号为 30。

从柱面 30 开始，计算剩余请求的距离：
- 请求 2：30，已访问
- 请求 5：35，距离 5
- 请求 4：40，距离 10
- 请求 6：90，距离 60
- 请求 1：180，距离 150

选择距离 30 最近的是请求 5，柱面号为 35。

从柱面 35 开始，计算剩余请求的距离：
- 请求 5：35，已访问
- 请求 4：40，距离 5
- 请求 6：90，距离 55
- 请求 1：180，距离 145

选择距离 35 最近的是请求 4，柱面号为 40。

从柱面 40 开始，计算剩余请求的距离：
- 请求 4：40，已访问
- 请求 6：90，距离 50
- 请求 1：180，距离 140

选择距离 40 最近的是请求 6，柱面号为 90。

从柱面 90 开始，计算剩余请求的距离：
- 请求 6：90，已访问
- 请求 1：180，距离 90

最后，选择请求 1，柱面号为 180。

因此，访问顺序是：**3, 2, 5, 4, 6, 1**。

**答案：**
（2）最短寻道时间优先（SSTF）的访问次序是 **3, 2, 5, 4, 6, 1**。

---

### 总结：
- **电梯调度算法（Scan）**：磁头按一个方向移动，直到到达磁盘的一端，再反向处理请求。执行时根据请求的柱面顺序确定访问顺序。
- **最短寻道时间优先（SSTF）**：每次选择距离当前磁头位置最近的请求进行处理，从而减少寻道时间。

通过这两个算法的比较，我们可以看出，电梯调度算法更加系统地按照方向处理请求，而 SSTF 更加注重每次选择当前最接近的请求来减少磁头移动的距离。